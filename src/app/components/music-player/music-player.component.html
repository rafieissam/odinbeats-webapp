<div class="h-28 bg-[var(--color-1)]" [ngStyle]="{ backgroundImage: 'url(\'' + activeSong?.image + '\')' }">
    <div class="absolute inset-0 backdrop-blur-md blur-md shadow-sm"></div>
    <div class="w-full h-full flex items-center justify-between px-10 py-4 bg-black/60">
        <div class="w-1/3 flex items-center">
            <div class="flex items-center">
                <div class="h-20 w-20 rounded-md bg-[var(--color-1)]" [ngStyle]="{ backgroundImage: 'url(\'' + activeSong?.image + '\')' }"></div>
                <div class="ml-4">
                    <div class="text-slate-200 text-sm">{{ activeSong?.name }}</div>
                    <div class="text-slate-400 text-xs">{{ activeSong?.artist }}</div>
                </div>
            </div>
            @if (activeSong?.hasOwnProperty('isLiked')) {
                <div class="cursor-pointer ml-6 leading-5">
                    @if (activeSong?.isLiked) {
                        <ng-icon name="jamHeartF" (click)="unlike()" color="var(--color-7)"></ng-icon>
                    } @else {
                        <ng-icon name="jamHeart" (click)="like()"></ng-icon>
                    }
                </div>
            }
        </div>
        <div class="w-1/3 flex items-center flex-col">
            <div class="flex space-x-6 items-center">
                <ng-icon class="cursor-pointer" name="jamShuffle" [color]="isShuffled ? 'var(--color-7)' : 'var(--color-3)'" (click)="toggleShuffle()"></ng-icon>
                <ng-icon class="cursor-pointer" name="jamSetBackward" [color]="inQueue || playthroughDuration >= 2 ? 'var(--color-3)' : 'var(--color-2)'" (click)="goPrevious()"></ng-icon>
                <div class="cursor-pointer bg-[var(--color-7)] w-10 h-10 rounded-full flex justify-center items-center" (click)="togglePlay()">
                    @if (isPlaying) {
                        <ng-icon name="jamPause"></ng-icon>
                    } @else {
                        <ng-icon name="jamPlay"></ng-icon>
                    }
                </div>
                <ng-icon class="cursor-pointer" name="jamSetForward" [color]="inQueue ? 'var(--color-3)' : 'var(--color-2)'" (click)="goNext()"></ng-icon>
                <span class="flex items-center">
                    <ng-icon class="cursor-pointer" name="jamRepeat" [color]="(isRepeating || isRepeatingOnce) ? 'var(--color-7)' : 'var(--color-3)'" (click)="toggleRepeat()"></ng-icon>
                    @if (isRepeatingOnce) {
                        <span class="absolute -top-0.5 -right-1 text-white bg-[var(--color-7)] w-3 h-3 rounded-full text-[0.5rem] flex items-center justify-center">1</span>
                    }
                </span>
            </div>
            <div class="mt-4">
                <div class="flex items-center space-x-2 text-slate-200 text-xs">
                    <span>{{ playthroughDuration | durationToMins }}</span>
                    <div #seekBar class="rounded-md w-96 h-1 bg-slate-600 select-none">
                        <div class="absolute rounded-md inset-y-0 left-0 bg-[var(--color-7)]" [ngStyle]="{ width: playthroughPercentage + '%' }"></div>
                        <div class="absolute cursor-grab h-3 w-3 -mt-1.5 -ml-1.5 hover:h-4 hover:w-4 hover:-mt-2 hover:-ml-2 top-1/2 rounded-full bg-[var(--color-7)] shadow-lg border-2 border-[var(--color-1)]"
                            [ngStyle]="{ left: playthroughPercentage + '%' }"
                            (mousedown)="onSeekMouseDown($event)"
                        ></div>
                    </div>
                    <span>{{ activeSong?.duration | durationToMins }}</span>
                </div>
            </div>
        </div>
        <div class="w-1/3 flex justify-end items-center">
            <ng-icon class="cursor-pointer mr-3" (click)="toggleMute()" [name]="isMuted ? 'jamVolumeMute' : volumePercentage == 0 ? 'jamVolume' : volumePercentage < 50 ? 'jamVolumeDown' : 'jamVolumeUp'"></ng-icon>
            <div #volumeBar class="rounded-md w-28 h-1 bg-slate-600 select-none">
                <div class="absolute rounded-md inset-y-0 left-0 bg-[var(--color-7)]" [ngStyle]="{ width: volumePercentage + '%' }"></div>
                <div class="absolute cursor-grab h-3 w-3 -mt-1.5 -ml-1.5 hover:h-4 hover:w-4 hover:-mt-2 hover:-ml-2 top-1/2 rounded-full bg-[var(--color-7)] shadow-lg border-2 border-[var(--color-1)]"
                    [ngStyle]="{ left: volumePercentage + '%' }"
                    (mousedown)="onVolumeMouseDown($event)"
                ></div>
            </div>
        </div>
    </div>
</div>