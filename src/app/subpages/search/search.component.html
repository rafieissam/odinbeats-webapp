<div class="max-h-full">
    <div class="flex items-center justify-between text-slate-200">
        <form (ngSubmit)="onSearch()">
            <label class="relative block">
                <span class="sr-only">Search</span>
                <span class="absolute inset-y-0 left-0 flex items-center pl-4 z-10">
                    <ng-icon name="jamSearch" />
                </span>
                <input class="bg-color-6 rounded-full py-2 px-4 pl-12 text-sm focus-within:outline-none border-2 border-transparent focus:border-[var(--color-7)] placeholder:text-slate-400 placeholder:text-sm ease-in-out transition-all"
                    placeholder="Search for anything..."
                    autocomplete="off"
                    type="text"
                    name="search"
                    [(ngModel)]="searchText"
                />
            </label>
        </form>
        <app-user-pill></app-user-pill>
    </div>

    @if (!searchedOnce) {
        <div class="flex items-center flex-col py-44 text-2xl text-slate-200 tracking-wide">
            <span class="text-3xl">Explore <span class="text-[var(--color-7)] font-bold">OdinBeats</span>,</span>
            <span>a Library of Music!</span>
        </div>
    } @else {
        <div>
            @if (isLoading) {
                <div class="flex justify-center py-20 w-full">
                    <app-loader></app-loader>
                </div>
            } @else {
                <div class="text-2xl text-white font-bold py-6 pb-4">
                    Results:
                </div>
                <div class="mt-2">
                    @for (song of songs; track song.id; let i = $index) {
                        <div class="flex items-center py-2 px-2 hover:bg-[var(--color-5)] cursor-pointer transition ease-in-out text-slate-400"
                            [ngStyle]="{ backgroundColor: song.id == activeSongId ? 'var(--color-5)' : '' }"
                            (click)="playSong(song)"
                        >
                            <div class="w-1/3 flex items-center text-slate-400">
                                <div class="w-10 h-10 rounded-md bg-no-repeat bg-cover bg-[var(--color-5)] border-2"
                                    [ngStyle]="{ borderColor: song.id == activeSongId ? 'var(--color-7)' : 'var(--color-1)', backgroundImage: 'url(\'' + song.image + '\')' }"
                                ></div>
                                <div class="ml-2 text-sm" [ngStyle]="{ color: song.id == activeSongId ? 'var(--color-7)' : '#fff', fontWeight: song.id == activeSongId ? 'bold': 'normal' }">
                                    {{ song.name }}
                                </div>
                            </div>
                            <div class="w-1/3 text-xs">{{ song.artist }}</div>    
                            <div class="w-1/3 text-right text-xs">{{ song.duration | durationToMins }}</div>
                        </div>
                    } @empty {
                        <div class="box-content h-16 py-2 px-2 text-slate-400 text-sm italic">
                            No Songs Found!
                        </div>
                    }
                </div>
            }
        </div>
    }
</div>
